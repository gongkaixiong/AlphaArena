
## [SEARCH] æŒä»“è¯„ä¼°ä»»åŠ¡

ä½ éœ€è¦è¯„ä¼°å½“å‰æŒä»“æ˜¯å¦åº”è¯¥å¹³ä»“ã€‚è¿™æ˜¯ä¸€ä¸ªå…³é”®å†³ç­–ï¼Œå¯ä»¥ä¿æŠ¤åˆ©æ¶¦æˆ–å‡å°‘æŸå¤±ã€‚

### [TIMER] å½“å‰äº¤æ˜“æ—¶æ®µ
- **æ—¶æ®µ**: {session_info['session']} (åŒ—äº¬æ—¶é—´{session_info['beijing_hour']}:00)
- **æ³¢åŠ¨æ€§**: {session_info['volatility'].upper()}
- **æ—¶æ®µå»ºè®®**: {session_info['recommendation']}

### [ANALYZE] æŒä»“ä¿¡æ¯
- **äº¤æ˜“å¯¹**: {position_info['symbol']}
- **æ–¹å‘**: {position_info['side']} ({"å¤šå•" if position_info['side'] == 'LONG' else "ç©ºå•"})
- **å¼€ä»“ä»·**: ${position_info['entry_price']:.2f}
- **å½“å‰ä»·**: ${position_info['current_price']:.2f}
- **æœªå®ç°ç›ˆäº**: ${position_info['unrealized_pnl']:+.2f} ({position_info['unrealized_pnl_pct']:+.2f}%)
- **æ æ†**: {position_info['leverage']}x
- **æŒä»“æ—¶é•¿**: {position_info['holding_time']}
- **åä¹‰ä»·å€¼**: ${position_info['notional_value']:.2f}

### [TREND-UP] å½“å‰å¸‚åœºæ•°æ®
- **RSI(14)**: {market_data.get('rsi', 'N/A')} {'[è¶…å–]' if isinstance(market_data.get('rsi'), (int, float)) and market_data.get('rsi') < 30 else '[è¶…ä¹°]' if isinstance(market_data.get('rsi'), (int, float)) and market_data.get('rsi') > 70 else '[ä¸­æ€§]'}
- **MACD**: {market_data.get('macd', {}).get('histogram', 'N/A')} ({'çœ‹æ¶¨' if isinstance(market_data.get('macd', {}).get('histogram'), (int, float)) and market_data.get('macd', {}).get('histogram') > 0 else 'çœ‹è·Œ' if isinstance(market_data.get('macd', {}).get('histogram'), (int, float)) else 'N/A'})
- **è¶‹åŠ¿**: {market_data.get('trend', 'N/A')}
- **24hå˜åŒ–**: {market_data.get('price_change_24h', 'N/A')}%

### [ACCOUNT] è´¦æˆ·çŠ¶æ€
- **è´¦æˆ·ä½™é¢**: ${account_info.get('balance', 0):.2f}
- **æ€»ä»·å€¼**: ${account_info.get('total_value', 0):.2f}
- **æŒä»“æ•°é‡**: {account_info.get('positions_count', 0)}

### ğŸ”¥ [ROLL] ROLLæ»šä»“çŠ¶æ€
- **å½“å‰ROLLæ¬¡æ•°**: {roll_count}/6
- **ROLLçŠ¶æ€**: {'âœ… å¯ä»¥ç»§ç»­ROLL' if roll_count < 6 else 'â›” å·²è¾¾ä¸Šé™ï¼Œä¼˜å…ˆæ­¢ç›ˆ'}
- **åŸå§‹å…¥åœºä»·**: ${original_entry_price:.2f} (ç”¨äºç§»åŠ¨æ­¢æŸåˆ°ç›ˆäºå¹³è¡¡)
- **è·ç¦»ROLLé˜ˆå€¼**: {6.0 if position_info['leverage'] <= 10 else 4.8}% (å½“å‰ç›ˆåˆ©: {position_info['unrealized_pnl_pct']:.2f}%)

ğŸ“Š **ROLLå†³ç­–æŒ‡å—**:
- ROLLæ¬¡æ•° < 6 ä¸” ç›ˆåˆ© â‰¥ {6.0 if position_info['leverage'] <= 10 else 4.8}% â†’ ä¼˜å…ˆROLLåŠ ä»“
- ROLLæ¬¡æ•° = 6 ä¸” ç›ˆåˆ© â‰¥ {6.0 if position_info['leverage'] <= 10 else 4.8}% â†’ è€ƒè™‘éƒ¨åˆ†æ­¢ç›ˆ
- ç›ˆåˆ© 3-6% â†’ å¯åŠ¨ç§»åŠ¨æ­¢æŸï¼Œç»§ç»­æŒæœ‰ç­‰å¾…ROLL

### [TARGET] è¯„ä¼°æ ‡å‡†

âš¡ **æ™ºèƒ½æ­¢æŸç³»ç»Ÿ - å¤šå±‚çº§é£é™©åˆ¤æ–­**:

**ğŸ”´ ç¡¬æ­¢æŸ (æ— æ¡ä»¶ç«‹å³å¹³ä»“)**:
1. ä¿è¯é‡‘äºæŸ > 50% (ä¾‹å¦‚: -2% Ã— 25x = -50%ä¿è¯é‡‘)
2. ä¿è¯é‡‘äºæŸ > 30% ä¸”æŒä»“ > 2å°æ—¶
3. ä»·æ ¼çªç ´æ­¢æŸä½ > 20%

**ğŸŸ  è¶‹åŠ¿åè½¬æ­¢æŸ (é«˜ä¼˜å…ˆçº§)**:
1. å¤šå•: å¸‚åœºè½¬ä¸ºå¼ºä¸‹è·Œè¶‹åŠ¿ ä¸” äºæŸ > 10%
2. ç©ºå•: å¸‚åœºè½¬ä¸ºå¼ºä¸Šæ¶¨è¶‹åŠ¿ ä¸” äºæŸ > 10%
3. MACDå‰§çƒˆåè½¬ ä¸” RSIèƒŒç¦» ä¸” äºæŸ > 5%

**ğŸŸ¡ æŠ€æœ¯é¢æ¶åŒ–æ­¢æŸ**:
1. æ‰€æœ‰ä¸»è¦æŠ€æœ¯æŒ‡æ ‡(RSI, MACD, è¶‹åŠ¿)å…¨é¢åå‘
2. ä¸”æŒä»“ > 1å°æ—¶
3. ä¸”äºæŸ > 3%

**[WARNING] é¿å…è¿‡åº¦äº¤æ˜“çš„æ ¸å¿ƒåŸåˆ™**:
- **æ‰‹ç»­è´¹æˆæœ¬å¾ˆé«˜**: æ¯æ¬¡å¹³ä»“éƒ½æœ‰æ‰‹ç»­è´¹ï¼Œé¢‘ç¹äº¤æ˜“ä¼šåå™¬åˆ©æ¶¦
- **ç»™äºˆç­–ç•¥å‘å±•æ—¶é—´**: åˆšå¼€ä»“çš„æŒä»“éœ€è¦æ—¶é—´éªŒè¯ï¼Œä¸è¦è¿‡æ—©å¹³ä»“
- **æŒä»“æ—¶é—´<1å°æ—¶**: é™¤éè§¦å‘æ™ºèƒ½æ­¢æŸç³»ç»Ÿï¼Œå¦åˆ™åº”è¯¥ç»§ç»­æŒæœ‰
- **å°å¹…æ³¢åŠ¨æ˜¯æ­£å¸¸çš„**: å¸‚åœºæœ‰æ­£å¸¸æ³¢åŠ¨ï¼Œä¸è¦å› ä¸ºçŸ­æœŸå°å¹…äºæŸå°±ææ…Œ

**[MONEY] ROLLæ»šä»“ä¼˜å…ˆç­–ç•¥ - åˆ©æ¶¦æœ€å¤§åŒ–ï¼**
æ ¸å¿ƒåŸåˆ™ï¼š**æµ®ç›ˆç”¨äºROLLï¼Œæœ€ç»ˆé”å®š"æœ€å¤§åŒ–åˆ©æ¶¦"**

âš ï¸ **é«˜æ æ†é˜ˆå€¼è‡ªåŠ¨è°ƒæ•´**ï¼š
- å½“å‰æ æ†{position_info['leverage']}x {'> 10xï¼Œæ‰€æœ‰é˜ˆå€¼é™ä½20%' if position_info['leverage'] > 10 else 'â‰¤ 10xï¼Œä½¿ç”¨æ ‡å‡†é˜ˆå€¼'}

ğŸ“Š **å½“å‰æŒä»“çš„ROLLé˜ˆå€¼**ï¼ˆå·²æ ¹æ®æ æ†è°ƒæ•´ï¼‰ï¼š
- å¯åŠ¨ç§»åŠ¨æ­¢æŸ: {3.0 if position_info['leverage'] <= 10 else 2.4}%  {'â† å·²è¾¾åˆ°ï¼å¯åŠ¨ä¿æŠ¤' if position_info['unrealized_pnl_pct'] >= (3.0 if position_info['leverage'] <= 10 else 2.4) else ''}
- ROLLæ»šä»“è§¦å‘: {6.0 if position_info['leverage'] <= 10 else 4.8}%  {'â† å·²è¾¾åˆ°ï¼ä¼˜å…ˆROLL' if position_info['unrealized_pnl_pct'] >= (6.0 if position_info['leverage'] <= 10 else 4.8) else ''}
- ROLLä¸Šé™åæ­¢ç›ˆ: {8.0 if position_info['leverage'] <= 10 else 6.4}%  {'â† å·²è¾¾åˆ°ï¼è€ƒè™‘éƒ¨åˆ†æ­¢ç›ˆ' if position_info['unrealized_pnl_pct'] >= (8.0 if position_info['leverage'] <= 10 else 6.4) else ''}

ğŸ”¥ **ROLLä¼˜å…ˆæ‰§è¡Œé€»è¾‘**ï¼š
1. å½“å‰ç›ˆåˆ© â‰¥ {3.0 if position_info['leverage'] <= 10 else 2.4}% â†’ **å¯åŠ¨ç§»åŠ¨æ­¢æŸï¼ˆå›æ’¤2%è§¦å‘ï¼‰**
   - ä¿æŠ¤å·²æœ‰åˆ©æ¶¦ï¼Œä½†ç»§ç»­æŒæœ‰
   - ä¸è¦å¹³ä»“ï¼Œç­‰å¾…ROLLæœºä¼š

2. å½“å‰ç›ˆåˆ© â‰¥ {6.0 if position_info['leverage'] <= 10 else 4.8}% ä¸”è¶‹åŠ¿å¼ºåŠ² â†’ **ä¼˜å…ˆæ‰§è¡ŒROLL**
   - å½“å‰ROLLæ¬¡æ•°: {roll_count}/6
   - å¦‚æœ<6æ¬¡ï¼šä½¿ç”¨60%æµ®ç›ˆåŠ ä»“ï¼ŒåŸä»“æ­¢æŸç§»è‡³ç›ˆäºå¹³è¡¡
   - å¦‚æœ=6æ¬¡ï¼šæ‰è€ƒè™‘éƒ¨åˆ†æ­¢ç›ˆï¼ˆå‡ä»“30-40%ï¼‰
   - ä¸è¦ç®€å•å¹³ä»“ï¼ŒROLL > ç®€å•æ­¢ç›ˆ

3. å½“å‰ç›ˆåˆ© â‰¥ {8.0 if position_info['leverage'] <= 10 else 6.4}% ä¸”ROLL=6æ¬¡ â†’ **éƒ¨åˆ†æ­¢ç›ˆ**
   - å·²è¾¾ROLLä¸Šé™ï¼Œé”å®šéƒ¨åˆ†åˆ©æ¶¦
   - å‡ä»“50%ï¼Œå‰©ä½™ä»“ä½ç»§ç»­æŒæœ‰

**[SYSTEM] åˆ©æ¶¦æœ€å¤§åŒ–æ€ç»´**ï¼š
- ç›ˆåˆ©3%ä¸è¦æ€¥ç€å¹³ä»“ â†’ å¯åŠ¨æ­¢æŸä¿æŠ¤ï¼Œç­‰å¾…6%çš„ROLLæœºä¼š
- ç›ˆåˆ©6%æ‰§è¡ŒROLL > ç›´æ¥å¹³ä»“ â†’ æœ€ç»ˆå¯èƒ½é”å®š15-20%+
- ROLLå·²6æ¬¡æ‰è€ƒè™‘éƒ¨åˆ†æ­¢ç›ˆ â†’ ç¡®ä¿åˆ©æ¶¦æœ€å¤§åŒ–
- **æœ€å¤§åŒ–åˆ©æ¶¦æ‰æ˜¯ç»ˆæç›®æ ‡ï¼**

**åº”è¯¥å¹³ä»“çš„æƒ…å†µ (CLOSE)** - è§¦å‘ä»¥ä¸‹ä»»ä¸€æ¡ä»¶:
1. ğŸ”¥ **ROLLè¾¾åˆ°ä¸Šé™ + éƒ¨åˆ†æ­¢ç›ˆ**:
   - ROLLæ¬¡æ•° = 6æ¬¡ ä¸” å½“å‰ç›ˆåˆ© â‰¥ è°ƒæ•´åçš„6%é˜ˆå€¼ â†’ è€ƒè™‘éƒ¨åˆ†æ­¢ç›ˆï¼ˆå‡ä»“30-40%ï¼‰
   - ROLLæ¬¡æ•° = 6æ¬¡ ä¸” å½“å‰ç›ˆåˆ© â‰¥ è°ƒæ•´åçš„8%é˜ˆå€¼ â†’ éƒ¨åˆ†æ­¢ç›ˆï¼ˆå‡ä»“50%ï¼‰
   - âš ï¸ åªæœ‰ROLLå·²è¾¾ä¸Šé™æ‰è€ƒè™‘å¹³ä»“ï¼Œå¦åˆ™ä¼˜å…ˆROLL

2. [WARNING] **é‡å¤§æ­¢æŸ**: äºæŸ>1.5%ä¸”æŠ€æœ¯é¢å®Œå…¨å´©æºƒï¼ˆRSIèƒŒç¦»+MACDå‰§çƒˆåè½¬+è¶‹åŠ¿å½»åº•é€†è½¬ï¼‰

3. [LOOP] **æç«¯è¶‹åŠ¿åè½¬**:
   - å¤šå•: RSI>75ä¸”MACDæ€¥å‰§è½¬è´Ÿï¼Œä¸”ä»·æ ¼æš´è·Œ
   - ç©ºå•: RSI<25ä¸”MACDæ€¥å‰§è½¬æ­£ï¼Œä¸”ä»·æ ¼æš´æ¶¨

4. [TIMER] **é•¿æœŸæ— æ•ˆ**: æŒä»“>24å°æ—¶ä¸”å®Œå…¨æ²¡æœ‰ç›ˆåˆ©è¿¹è±¡

âš ï¸ **å…³é”®æé†’**ï¼šç›ˆåˆ©è¾¾åˆ°6%ä¸”ROLL<6æ¬¡æ—¶ï¼Œåº”è¯¥ROLLè€Œéå¹³ä»“ï¼

**åº”è¯¥ç»§ç»­æŒæœ‰çš„æƒ…å†µ (HOLD)**:
1. âš¡ **åˆšå¼€ä»“**: æŒä»“æ—¶é—´<1å°æ—¶ï¼Œæ— è®ºç›ˆäºï¼Œç»™äºˆå……åˆ†å‘å±•æ—¶é—´
2. [ANALYZE] **å°å¹…æ³¢åŠ¨**: ç›ˆäºåœ¨Â±2%ä»¥å†…ä¸”æŠ€æœ¯é¢æœªå‰§çƒˆå˜åŒ–
3. [TREND-UP] **è¶‹åŠ¿å¥åº·**: æŠ€æœ¯æŒ‡æ ‡æ•´ä½“æ”¯æŒæŒä»“æ–¹å‘
4. ğŸ’ª **ç­‰å¾…ROLLæœºä¼š**: å½“å‰ç›ˆåˆ© 3-6%ï¼Œå·²å¯åŠ¨ç§»åŠ¨æ­¢æŸï¼Œç­‰å¾…è¾¾åˆ°ROLLé˜ˆå€¼
5. ğŸ”¥ **æœªè¾¾ROLLä¸Šé™**: ROLLæ¬¡æ•° < 6æ¬¡ï¼Œç»§ç»­ç­‰å¾…ROLLæœºä¼šè€Œéæ€¥äºå¹³ä»“

âš ï¸ **é‡è¦æé†’**ï¼š
- ç›ˆåˆ©3-6%æ—¶ï¼šå¯åŠ¨ç§»åŠ¨æ­¢æŸä¿æŠ¤ï¼Œä½†ç»§ç»­æŒæœ‰ç­‰å¾…ROLL
- ROLL<6æ¬¡æ—¶ï¼šä¼˜å…ˆROLLè€Œéç®€å•å¹³ä»“
- æ‰‹ç»­è´¹æˆæœ¬ä¸æ˜¯è¿‡æ—©å¹³ä»“çš„ç†ç”±
- æœ€å¤§åŒ–åˆ©æ¶¦æ‰æ˜¯ç›®æ ‡ï¼Œä¸è¦æ€¥äºé”å®šå°é¢åˆ©æ¶¦

### âš¡ æ ¸å¿ƒå†³ç­–åŸåˆ™ï¼ˆæŒ‰ä¼˜å…ˆçº§æ’åºï¼‰
1. ğŸ”¥ **ROLLæ»šä»“ç­–ç•¥ > ç®€å•æ­¢ç›ˆ**
   - ç›ˆåˆ©è¾¾åˆ°ROLLé˜ˆå€¼(6%æˆ–4.8%)ä¸”ROLL<6æ¬¡ â†’ ä¼˜å…ˆROLLè€Œéå¹³ä»“
   - ROLLèƒ½æœ€å¤§åŒ–åˆ©æ¶¦ï¼Œä¸è¦æ€¥äºé”å®šå°é¢åˆ©æ¶¦
   - ä¸èƒ½ç”¨"æ‰‹ç»­è´¹"ã€"å·²æœ‰åˆ©æ¶¦"ç­‰ç†ç”±é€ƒé¿ROLL

2. ğŸ›¡ï¸ **ç§»åŠ¨æ­¢æŸä¿æŠ¤ > å›ºå®šæ­¢æŸ**
   - ç›ˆåˆ©â‰¥3%(æˆ–2.4%é«˜æ æ†)æ—¶å¯åŠ¨ç§»åŠ¨æ­¢æŸ
   - ç§»åŠ¨æ­¢æŸæ˜¯ä¿æŠ¤æœºåˆ¶ï¼Œä¸æ˜¯å¹³ä»“ä¿¡å·
   - ç»§ç»­æŒæœ‰ç­‰å¾…ROLLæœºä¼š

3. ğŸ’° **åˆ©æ¶¦æœ€å¤§åŒ– > è¿‡æ—©æ­¢ç›ˆ**
   - ç›®æ ‡æ˜¯é”å®š"æœ€å¤§åŒ–åˆ©æ¶¦"è€Œé"æ—©æœŸå°é¢åˆ©æ¶¦"
   - ROLLèƒ½è®©2%åˆ©æ¶¦å˜æˆ15-20%+
   - è€å¿ƒç­‰å¾…ROLLæœºä¼šæ¯”æ€¥äºå¹³ä»“æ›´é‡è¦

4. [WARNING] **é«˜æ æ†é˜ˆå€¼è°ƒæ•´**
   - >10xæ æ†æ—¶æ‰€æœ‰é˜ˆå€¼è‡ªåŠ¨é™ä½20%
   - è¿™æ˜¯å¼ºåˆ¶è°ƒæ•´ï¼Œä¸èƒ½å¿½ç•¥

5. [OK] **é¿å…è¿‡æ—©å¹³ä»“**
   - ç»™æŒä»“è‡³å°‘1å°æ—¶å‘å±•æ—¶é—´
   - ä¸è¦è¢«å°æ³¢åŠ¨å“åˆ°

## å¯ç”¨æ“ä½œ
- CLOSE: å¹³ä»“
- HOLD: è§‚æœ›

## ç³»ç»Ÿè‡ªåŠ¨å¤„ç†
- ç›ˆåˆ©â‰¥$2è‡ªåŠ¨å¹³ä»“(å¼ºåˆ¶æ­¢ç›ˆ)
- æµ®ç›ˆæ»šä»“(ç›ˆåˆ©â‰¥0.8%è‡ªåŠ¨åŠ ä»“)
- é£é™©æ§åˆ¶å’Œè®¢å•æ‰§è¡Œ



## å›å¤æ ¼å¼
JSON: {"action": "CLOSEæˆ–HOLD", "confidence": 0-100, "narrative": "å†³ç­–è¯´æ˜"}

ç°åœ¨,åŸºäºä¸‹é¢çš„å¸‚åœºæ•°æ®åšå‡ºä½ çš„å†³ç­–
